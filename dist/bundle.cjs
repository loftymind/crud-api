(()=>{"use strict";var e={n:n=>{var r=n&&n.__esModule?()=>n.default:()=>n;return e.d(r,{a:r}),r},d:(n,r)=>{for(var t in r)e.o(r,t)&&!e.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:r[t]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n)};const n=require("http"),r=require("crypto");var t=e.n(r);const o={randomUUID:t().randomUUID},i=new Uint8Array(256);let a=i.length;function u(){return a>i.length-16&&(t().randomFillSync(i),a=0),i.slice(a,a+=16)}const c=[];for(let e=0;e<256;++e)c.push((e+256).toString(16).slice(1));const s=function(e,n,r){if(o.randomUUID&&!n&&!e)return o.randomUUID();const t=(e=e||{}).random||(e.rng||u)();if(t[6]=15&t[6]|64,t[8]=63&t[8]|128,n){r=r||0;for(let e=0;e<16;++e)n[r+e]=t[e];return n}return function(e,n=0){return(c[e[n+0]]+c[e[n+1]]+c[e[n+2]]+c[e[n+3]]+"-"+c[e[n+4]]+c[e[n+5]]+"-"+c[e[n+6]]+c[e[n+7]]+"-"+c[e[n+8]]+c[e[n+9]]+"-"+c[e[n+10]]+c[e[n+11]]+c[e[n+12]]+c[e[n+13]]+c[e[n+14]]+c[e[n+15]]).toLowerCase()}(t)};var l=function(){return l=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},l.apply(this,arguments)},f=[],d=function(e){return f.find((function(n){return n.id===e}))},p=function(e){var n=l({id:s()},e);return f.push(n),n},h=function(e,n){return r=void 0,t=void 0,i=function(){return function(e,n){var r,t,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(c){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(r=1,t&&(o=2&u[0]?t.return:u[0]?t.throw||((o=t.return)&&o.call(t),0):t.next)&&!(o=o.call(t,u[1])).done)return o;switch(t=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,t=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=n.call(e,a)}catch(e){u=[6,e],t=0}finally{r=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}(this,(function(r){return[2,new Promise((function(r,t){var o=f.findIndex((function(n){return n.id===e}));n[o]=l({id:e},n),f[o]=n[o],r(n[o])}))]}))},new((o=void 0)||(o=Promise))((function(e,n){function a(e){try{c(i.next(e))}catch(e){n(e)}}function u(e){try{c(i.throw(e))}catch(e){n(e)}}function c(n){var r;n.done?e(n.value):(r=n.value,r instanceof o?r:new o((function(e){e(r)}))).then(a,u)}c((i=i.apply(r,t||[])).next())}));var r,t,o,i},y=function(e){var n=f.findIndex((function(n){return n.id===e}));-1!==n?f.splice(n,1):new Error};const v=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,b=function(e){return"string"==typeof e&&v.test(e)};var w={"Content-Type":"application/json"},g=function(e){return new Promise((function(n,r){try{var t="";e.on("data",(function(e){t+=e.toString()})),e.on("end",(function(){n(JSON.parse(t))}))}catch(e){r(e)}}))},m=function(e,n,r,t){return new(r||(r=Promise))((function(o,i){function a(e){try{c(t.next(e))}catch(e){i(e)}}function u(e){try{c(t.throw(e))}catch(e){i(e)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof r?n:new r((function(e){e(n)}))).then(a,u)}c((t=t.apply(e,n||[])).next())}))},S=function(e,n){var r,t,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(c){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(r=1,t&&(o=2&u[0]?t.return:u[0]?t.throw||((o=t.return)&&o.call(t),0):t.next)&&!(o=o.call(t,u[1])).done)return o;switch(t=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,t=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=n.call(e,a)}catch(e){u=[6,e],t=0}finally{r=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},O=function(e,n,r){return m(void 0,void 0,void 0,(function(){var t,o,i,a,u,c,s,l;return S(this,(function(f){switch(f.label){case 0:return f.trys.push([0,7,,8]),[4,d(r)];case 1:return t=f.sent(),function(e){return b(e)&&4===function(e){if(!b(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}(e)}(r)?[3,2]:(n.writeHead(400,w),n.end(JSON.stringify({message:"Invalid UUID"})),[3,6]);case 2:return t?[3,3]:(n.writeHead(404,w),n.end(JSON.stringify({message:"User not found"})),[3,6]);case 3:return[4,g(e)];case 4:return o=f.sent(),i=JSON.parse(JSON.stringify(o)),a=i.username,u=i.age,c=i.hobbies,s={id:r,username:a||t.username,age:u||t.age,hobbies:c||t.hobbies},[4,h(r,s)];case 5:l=f.sent(),n.writeHead(200,w),n.end(JSON.stringify(l)),f.label=6;case 6:return[3,8];case 7:return f.sent(),n.writeHead(500,w),n.end(JSON.stringify({error:"Server Error"})),[3,8];case 8:return[2]}}))}))};n.createServer((function(e,n){return r=void 0,t=void 0,i=function(){var r;return function(e,n){var r,t,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(c){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(r=1,t&&(o=2&u[0]?t.return:u[0]?t.throw||((o=t.return)&&o.call(t),0):t.next)&&!(o=o.call(t,u[1])).done)return o;switch(t=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,t=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=n.call(e,a)}catch(e){u=[6,e],t=0}finally{r=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}(this,(function(t){return"/api/users"===e.url&&"GET"===e.method?function(e,n){m(void 0,void 0,void 0,(function(){var e;return S(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,f];case 1:return e=r.sent(),n.writeHead(200,w),n.end(JSON.stringify(e)),[3,3];case 2:return r.sent(),n.writeHead(500,w),n.end(JSON.stringify({error:"Server Error"})),[3,3];case 3:return[2]}}))}))}(0,n):"/api/users"===e.url&&"POST"===e.method?function(e,n){m(void 0,void 0,void 0,(function(){var r,t;return S(this,(function(o){switch(o.label){case 0:return o.trys.push([0,5,,6]),[4,g(e)];case 1:return(r=o.sent()).username&&r.age&&r.hobbies?[4,p(r)]:[3,3];case 2:return t=o.sent(),n.writeHead(201,w),n.end(JSON.stringify(t)),[3,4];case 3:n.writeHead(400,w),n.end(JSON.stringify({error:"Does not contain required fields"})),o.label=4;case 4:return[3,6];case 5:return o.sent(),n.writeHead(500,w),n.end(JSON.stringify({error:"Server Error"})),[3,6];case 6:return[2]}}))}))}(e,n):e.url.match(/\/api\/users\/\w+/)&&"GET"===e.method?(r=e.url.split("/")[3],function(e,n,r){m(void 0,void 0,void 0,(function(){var e;return S(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,d(r)];case 1:return e=t.sent(),n.writeHead(200,w),n.end(JSON.stringify(e)),[3,3];case 2:return t.sent(),n.writeHead(404,w),n.end(JSON.stringify({error:"Server Error"})),[3,3];case 3:return[2]}}))}))}(0,n,r)):e.url.match(/\/api\/users\/\w+/)&&"PUT"===e.method?(r=e.url.split("/")[3],O(e,n,r)):e.url.match(/\/api\/users\/\w+/)&&"DELETE"===e.method?(r=e.url.split("/")[3],function(e,n,r){m(void 0,void 0,void 0,(function(){return S(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,y(r)];case 1:return e.sent(),n.writeHead(204,w),n.end(),[3,3];case 2:return e.sent(),n.writeHead(404,w),n.end(JSON.stringify({error:"Server Error"})),[3,3];case 3:return[2]}}))}))}(0,n,r)):(n.writeHead(404,{"Content-Type":"application/json"}),n.end(JSON.stringify({message:"Route not found"}))),[2]}))},new((o=void 0)||(o=Promise))((function(e,n){function a(e){try{c(i.next(e))}catch(e){n(e)}}function u(e){try{c(i.throw(e))}catch(e){n(e)}}function c(n){var r;n.done?e(n.value):(r=n.value,r instanceof o?r:new o((function(e){e(r)}))).then(a,u)}c((i=i.apply(r,t||[])).next())}));var r,t,o,i})).listen(4e3,(function(){console.log("Server is running on port ".concat(4e3))}))})();